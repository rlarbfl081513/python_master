



![img.png](Theory_img/img.png)
https://ninefloor-design.tistory.com/216



# heapì´ë€?
1. íë€?
   - ì„ ì…ì„ ì¶œ ìë£Œêµ¬ì¡°, ë¨¼ì € ë“¤ì–´ì˜¨ ë°ì´í„°ê°€ ë¨¼ì € ë‚˜ê°
   - ìš°ì„ ìˆœìœ„ íëŠ” ë“¤ì–´ì˜¨ ìˆœì„œì™€ ìƒê´€ì—†ì´ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ë°ì´í„°ê°€ ë¨¼ì € ë‚˜ê°€ëŠ” ìë£Œêµ¬ì¡°
   - ìµœì†Œí™ì—ì„œ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤ëŠ” ê²ƒì€ ê°€ì¥ ì‘ì€ ê°’ì„ ë§í•¨.
1. ì •ì˜
   - í™ì€ ìš°ì„ ìˆœìœ„ íë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ ìë£Œ êµ¬ì¡°
   - ìŒ“ì•„ì˜¬ë¦¬ë‹¤, ìŒ“ì•„ì˜¬ë¦° ë”ë¯¸ì˜ ì˜ë¯¸ë¥¼ ê°€ì§
   - í™ì€ ì´ì§„íŠ¸ë¦¬ í˜•íƒœë¡œ êµ¬ì„±ë˜ë©° ë‹¤ìŒê³¼ ê°™ì€ ê·œì¹™ì´ ìˆìŒ
   -  [ê·œì¹™ 1]
     - ë…¸ë“œë¥¼ ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ í•˜ë‚˜ì”© ë¹ ì§ì—†ì´ ì±„ìš´ë‹¤.
     - ![img_1.png](Theory_img/img_1.png)
   - [ê·œì¹™ 2]
   - ìµœì†Œí™ì€ ë¶€ëª¨ë…¸ë“œê°€ ìì‹ë…¸ë“œ ê°’ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì•„ì•¼í•¨
   - íŒŒì´ì„ ì˜ í™ ëª¨ë“ˆì€ ìµœì†Œ í™ìœ¼ë¡œ (ìµœëŒ€í™ì€ ë¶€ëª¨ë…¸ë“œê°€ ìì‹ë…¸ë“œê°’ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ìŒ)
   - ![img.png](Theory_img/ê·œì¹™2.png)
3. í™ì´ ì œê³µí•˜ëŠ” í•¨ìˆ˜
   - [í™ í•¨ìˆ˜ ìì„¸íˆ ë³´ê¸°](heap-def.md)
   - heapq.heappush(heap, item)
     - í™ ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ë©´ì„œ itemê°’ì„ heapìœ¼ë¡œ í‘¸ì‰¬
   - heap.heappop(heap)
     - í™ ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ë©´ì„œ, í™ì—ì„œ ê°€ì¥ ì‘ì€ í•­ëª©ì„ íŒí•˜ê³  ë°˜í™˜
   - heapq.heappushpop(heap, item)
     - í™ì—ì„œ itemì„ í‘¸ì‰¬, í™ì—ì„œ ê°€ì¥ ì‘ì€ í•­ëª©ì„ íŒí•˜ê³  ë°˜í™˜, 
     - í™í‘¸ì‰¬ í›„ í™íŒì„ ë³„ë„ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒë³´ë‹¤ ë” íš¨ìœ¨ì 
   - heap.heapify(x)
     - ë¦¬ìŠ¤íŠ¸ë¥¼ xì„ í˜• ì‹œê°„ìœ¼ë¡œ ì œìë¦¬ì—ì„œ í™ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
   - heapq.heapreplace(heap, item)
     - í™ì—ì„œ ê°€ì¥ ì‘ì€ í•­ëª©ì„ íŒí•˜ê³  ë°˜í™˜, ìƒˆë¡œìš´ itemë„ í‘¸ì‰¬, í™í¬ê¸°ëŠ” ë³€ê²½ë˜ì§€ ì•ŠìŒ
     - í™ íŒí‘¸ì‰¬í•˜ëŠ”ê²ƒë³´ë‹¤ íš¨ìœ¨ì 
     - ë°˜í™˜ëœ ê°’ì€ ì¶”ê°€í•œ itemë³´ë‹¤ í´ ìˆ˜ ìˆë‹¤. heappushpopì„ í•˜ë©´ ë‘ ê°’ ì¤‘ ì‘ì€ ê°’ì„ ë°˜í™˜í•˜ì—¬ í™ì— í°ê°’ì„ ë‚¨ê¸´ë‹¤.
   - heapq.merge(*iterables, key=None, reverse=False)
---
# íŒŒì´ì„ ì˜ heapq ëª¨ë“ˆ êµ¬í˜„í•˜ê¸°
- íŒŒì´ì„ ì˜ í™ ëª¨ë“ˆì€ ë°°ì—´(ë¦¬ìŠ¤íŠ¸)ë¥¼ ì´ìš©í•´, ì™„ì „ì´ì§„íŠ¸ë¦¬ë¥¼ êµ¬í˜„
- ì™„ì „ì´ì§„íŠ¸ë¦¬ëŠ” ì™¼ìª½ë¶€í„° ë¹ˆê³³ ì—†ì´ ì°¨ë¡€ëŒ€ë¡œ ì±„ì›€
- [ì¢…ë¥˜]
  - heappush(heap, data) : í™ì— ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì‚½ì…
  - heappop(heap) : í™ì—ì„œ ë£¨íŠ¸ ë…¸ë“œ(ìµœì†Ÿê°’ì„ êº¼ë‚¸ í›„ ì‚­ì œ)
  - heapify(x) : ì£¼ì–´ì§„ ë°°ì—´ì„ í™ êµ¬ì¡°ë¡œ ë³€í™˜ (ë”¸ê¹ìœ¼ë¡œ ë§Œë“¤ì–´ì¤Œ)
---
## heappush êµ¬í˜„í•˜ê¸°
1. ì •ì˜
   - ì´ë¯¸ í™êµ¬ì¡°ë¥¼ ê°€ì§„ ë°°ì—´ì˜ ëì— ìƒˆë¡œìš´ ì›ì†Œë¥¼ ë„£ëŠ” í•¨ìˆ˜
   - ì¶”ê°€ëœ ì›ì†Œê°€ ë¶€ëª¨ë³´ë‹¤ ì‘ìœ¼ë©´ ìµœì†Œí™êµ¬ì¡°ê°€ ì•„ë‹ˆë‹ˆê¹Œ ë¶€ëª¨ì™€ ìë¦¬ë¥¼ ë°”ê¾¼ë‹¤. ë¶€ëª¨ë³´ë‹¤ ì‘ì•„ì§€ëŠ” ìœ„ì¹˜ë¡œ ê°ˆë•Œê¹Œì§€ ë°˜ë³µí•´ì„œ ì´ë™í•œë‹¤.
   - ![img.png](Theory_img/í™í‘¸ì‰¬êµ¬í˜„.png)
2. êµ¬í˜„ì„ ìœ„í•œ ê³¼ì •
   - ë°°ì—´ ëì— ìƒˆ ê°’ì„ ì¶”ê°€ 
   - ì¶”ê°€í•œ ì›ì†Œì˜ ì¸ë±ìŠ¤ë¥¼ êµ¬í•¨
   - ë¶€ëª¨ ì¸ë±ìŠ¤ë¥¼ êµ¬í•˜ì—¬ ê°’ì„ ë¹„êµ
   - ìƒˆ ê°’ì´ ë¶€ëª¨ì˜ ê°’ë³´ë‹¤ ì‘ìœ¼ë©´ ê°’ì„ êµí™˜(ì¸ë±ìŠ¤ë¥¼ ê°±ì‹ , ìë¦¬ë¥¼ ë°”ê¿ˆìœ¼ë¡œì„œ ìƒˆë¡œ ì¶”ê°€í•œ ì¸ë±ìŠ¤ê°€ ë³€í–ˆìŒ)
   - ìƒˆ ê°’ì´ ë¶€ëª¨ì˜ ê°’ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì„ë–„ê¹Œì§€ ìœ„ì˜ í–‰ë™ì„ ë°˜ë³µ
3. ì½”ë“œ
```python
def heappush(heap, data):
    heap.append(data)
    # ì¶”ê°€í•œ ì›ì†Œì˜ ì¸ë±ìŠ¤ë¥¼ êµ¬í•œë‹¤.
    current = len(heap) - 1
    # í˜„ì¬ ì›ì†Œê°€ ë£¨íŠ¸(ì¸ë±ìŠ¤ 0)ì— ë„ë‹¬í•˜ë©´ ì¢…ë£Œ
    while current > 0:
        # ì¶”ê°€í•œ ì›ì†Œì˜ ë¶€ëª¨ ì¸ë±ìŠ¤ë¥¼ êµ¬í•œë‹¤.
        parent = (current - 1) // 2
        if heap[parent] > heap[current]:
            heap[parent], heap[current] = heap[current], heap[parent]
            # ì¶”ê°€í•œ ì›ì†Œì˜ ì¸ë±ìŠ¤ë¥¼ ê°±ì‹ í•œë‹¤.
            current = parent
        else:
            break


#í…ŒìŠ¤íŠ¸ ì½”ë“œ
import heapq
h1 = [3, 4, 6, 8, 5, 7]
h2 = [3, 4, 6, 8, 5, 7]
heappush(h1, 2)
heapq.heappush(h2, 2)
print(f"í™ {h1}ì— 2ë¥¼ ì¶”ê°€í•œ ê²°ê³¼")
print("êµ¬í˜„í•œ í•¨ìˆ˜ì˜ ê²°ê³¼: ", h1)
print("heapq ë©”ì„œë“œì˜ ê²°ê³¼:", h2)
print()
heappush(h1, 3)
heapq.heappush(h2, 3)
print(f"í™ {h1}ì— 3ì„ ì¶”ê°€í•œ ê²°ê³¼")
print("êµ¬í˜„í•œ í•¨ìˆ˜ì˜ ê²°ê³¼: ", h1)
print("heapq ë©”ì„œë“œì˜ ê²°ê³¼:", h2)

```
---
## heappop êµ¬í˜„í•˜ê¸°
1. ì½”ë“œ
2. ì‘ë™ë°©ì‹
   - ì´ìœ  1 : ì™œ ë§ˆì§€ë§‰ ë…¸ë“œë¡œ ëŒ€ì²´í•˜ëŠ”ê±¸ê¹Œ?
     - ì™„ì „ì´ì§„íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ê¸°ìœ„í•´ (ì™¼ìª½ë¶€í„° ì°¨ê³¡ ìŒ“ì´ê²Œ)
     - ë£¨íŠ¸ë¥¼ ì§€ìš°ê³  ìì‹ë…¸ë“œë¡œ ëŒ€ì²´í•˜ê²Œë˜ë©´ ì™„ì „ì´ì§„íŠ¸ë¦¬ì˜ êµ¬ì¡°ê°€ ê¹¨ì ¸ë²„ë¦¼
     - ë§¨ ë§ˆì§€ë§‰ ë…¸ë“œì˜ ê°’ì´ ê°€ì¥ í°ê±´ ë§ëŠ”ë°, ë§¨ ë§ˆì§ë§‰ ë…¸ë“œë¥¼ ë£¨íŠ¸ë…¸ë“œì— ë„£ì–´ì•¼
   - ì´ìœ  2 : ìì‹ ì¤‘ ì‘ì€ê±¸ ë¥˜íŠ¸ë¡œ ì˜¬ë¦¬ë©´ ì•ˆë¨??
     - í™ ì¡°ê±´ì„ ë³´ì¥í•  ìˆ˜ ì—†ìŒ, ìì‹ì¤‘ ì‘ì€ê±¸ ì˜¬ë¦°ë‹¤í•´ë„ ê·¸ ë…¸ë“œì˜ ìì‹ê¹Œì§€ ë‹¤ í™•ì¸í•´ì„œ í™ì¡°ê±´ì„ ë³µêµ¬í•´ì•¼í•¨ (í• ì¼ ê°œë§ì•„ì§)
     - ì°¨ë¼ë¦¬ ë§ˆì§€ë§‰ ë…¸ë“œë¥¼ ë£¨íŠ¸ë¡œ ì˜®ê¸°ëŠ”ê²Œ í•  ì¼ ëœ ìƒê¹€
3. ê³¼ì • ì´ë¯¸ì§€
   ![img.png](img.png)
4. ì½”ë“œ
   ```python
   def heappop(heap):
       if not heap:
           return "Empty Heap!"
       elif len(heap) == 1:
           return heap.pop()
   
       pop_data, heap[0] = heap[0], heap.pop()
       current, child = 0, 1
       while child < len(heap):
           sibling = child + 1
           if sibling < len(heap) and heap[child] > heap[sibling]:
               child = sibling
           if heap[current] > heap[child]:
               heap[current], heap[child] = heap[child], heap[current]
               current = child
               child = current * 2 + 1
           else:
               break
       return pop_data
   
   
   #í…ŒìŠ¤íŠ¸ ì½”ë“œ
   import heapq
    h1 = [3, 4, 6, 8, 5, 7]
    h2 = [3, 4, 6, 8, 5, 7]
    print(f"í™ {h1}ì—ì„œ popí•œ ê²°ê³¼\n")
    data1 = heappop(h1)
    data2 = heappop(h2)
    print("êµ¬í˜„í•œ í•¨ìˆ˜ pop data =", data1)
    print("êµ¬í˜„í•œ í•¨ìˆ˜ pop ì´í›„: ", h1)
    print()
    print("heapq í•¨ìˆ˜ pop data =", data2)
    print("heapq í•¨ìˆ˜ pop ì´í›„: ", h2)

   ```
- [ì°¸ê³ ë§í¬] https://docs.python.org/ko/3.13/library/heapq.html#basic-examples
- [ì°¸ê³ ë§í¬] https://wikidocs.net/194546

---
# heapqfiy ì½”ë“œë¡œ êµ¬í˜„í•˜ê¸°
1. ì •ì˜
   - ì£¼ì–´ì§„ ë°°ì—´ì´ë‚˜ ì´ì§„íŠ¸ë¦¬ë¥¼ í™êµ¬ì¡°ë¡œ ì¬ë°°ì—´í•˜ëŠ” ê²ƒì„ heapifyë¼ê³ í•¨. 
2. ì½”ë“œ
```python
   def heapify(arr):
    last = len(arr) // 2 - 1
    for current in range(last, -1, -1):
        while current <= last:
            child = current * 2 + 1
            sibling = child + 1
            if sibling < len(arr) and arr[child] > arr[sibling]:
                child = sibling
            if arr[current] > arr[child]:
                arr[current], arr[child] = arr[child], arr[current]
                current = child
            else:
                break


    #í…ŒìŠ¤íŠ¸ ì½”ë“œ
    h = [6, 2, 5, 1, 3, 4]
    heapify(h)
    print(h)

```
## ìµœëŒ€í™ ë§Œë“¤ê¸°
1. heapifyí•¨ìˆ˜ì—ì„œ ë¶€ë“±í˜¸ì˜ ë°©í–¥ë§Œ ë°”ê¾¸ë©´ ìµœëŒ€í™ì´ë‹¤.
2. ì½”ë“œ
```python
def max_heapify(arr):
    last = len(arr) // 2 - 1
    for current in range(last, -1, -1):
        while current <= last:
            child = current * 2 + 1
            sibling = child + 1
            if sibling < len(arr) and arr[child] < arr[sibling]:
                child = sibling
            if arr[current] < arr[child]:
                arr[current], arr[child] = arr[child], arr[current]
                current = child
            else:
                break

#í…ŒìŠ¤íŠ¸ ì½”ë“œ
h1 = [3, 4, 5, 1, 2]
h2 = [1, 5, 6, 4, 3, 8, 7, 2]
for h in (h1, h2):
    print(f"{h}ë¥¼ ìµœëŒ€ í™ êµ¬ì¡°ë¡œ ë§Œë“  ê²°ê³¼:")
    heapify(h)
    print(h)
    print()

```


# í™ ì¸ë±ìŠ¤ ê¸°ì¤€ë³„ ë¶€ëª¨/ìì‹ ë…¸ë“œ ì¸ë±ìŠ¤ ì •ë¦¬

í™(Heap) ìë£Œêµ¬ì¡°ì—ì„œ **ë¶€ëª¨ ë…¸ë“œì™€ ìì‹ ë…¸ë“œì˜ ì¸ë±ìŠ¤ë¥¼ ê³„ì‚°í•˜ëŠ” ë°©ì‹**ì€
ë°°ì—´ì´ **0ë²ˆ ì¸ë±ìŠ¤ë¶€í„° ì‹œì‘í•˜ëŠëƒ, 1ë²ˆ ì¸ë±ìŠ¤ë¶€í„° ì‹œì‘í•˜ëŠëƒ**ì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤.

---

## âœ… í™ ì¸ë±ìŠ¤ ê¸°ì¤€ë³„ ê³µì‹ ë¹„êµ

| ì¸ë±ìŠ¤ ê¸°ì¤€               | ë¶€ëª¨ ë…¸ë“œ ì¸ë±ìŠ¤       | ì™¼ìª½ ìì‹ ì¸ë±ìŠ¤    | ì˜¤ë¥¸ìª½ ìì‹ ì¸ë±ìŠ¤   |
|---------------------------|-------------------------|----------------------|----------------------|
| **0ë¶€í„° ì‹œì‘** (`heapq` ë“±) | `(i - 1) // 2`          | `2 * i + 1`          | `2 * i + 2`          |
| **1ë¶€í„° ì‹œì‘** (ì§ì ‘ êµ¬í˜„ ë“±) | `i // 2`                | `2 * i`              | `2 * i + 1`          |

---

## ğŸ” ì˜ˆì‹œ

### â–¶ï¸ 0ë¶€í„° ì‹œì‘ (`heapq` ë“±)
```python
# ë°°ì—´: ì¸ë±ìŠ¤ ê¸°ì¤€ 0ë¶€í„° ì‹œì‘
arr = [5, 10, 15, 20, 25, 30]
# i = 2 ì¼ ë•Œ:
parent = (2 - 1) // 2 = 0      # ë¶€ëª¨ëŠ” 0ë²ˆ ì¸ë±ìŠ¤ (ê°’ 5)
left_child = 2 * 2 + 1 = 5     # ì™¼ìª½ ìì‹ì€ 5ë²ˆ ì¸ë±ìŠ¤ (ê°’ 30)
right_child = 2 * 2 + 2 = 6    # ì˜¤ë¥¸ìª½ ìì‹ì€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ (index error)
```

### â–¶ï¸ 1ë¶€í„° ì‹œì‘ (ì§ì ‘ êµ¬í˜„)
```python
# ë°°ì—´: ì¸ë±ìŠ¤ ê¸°ì¤€ 1ë¶€í„° ì‹œì‘ (0ë²ˆì€ ì‚¬ìš© ì•ˆ í•¨)
arr = [None, 5, 10, 15, 20, 25, 30]
# i = 3 ì¼ ë•Œ:
parent = 3 // 2 = 1           # ë¶€ëª¨ëŠ” 1ë²ˆ ì¸ë±ìŠ¤ (ê°’ 5)
left_child = 2 * 3 = 6        # ì™¼ìª½ ìì‹ì€ 6ë²ˆ ì¸ë±ìŠ¤ (ê°’ 30)
right_child = 2 * 3 + 1 = 7   # ì˜¤ë¥¸ìª½ ìì‹ì€ ì—†ìŒ
```
---
# heapê³¼ heapqfiyë¡œ ê·¸ë ¤ì§€ëŠ” íŠ¸ë¦¬ì˜ ì°¨ì´ì 
## + ì•„ì´íŒ¨ë“œë¡œ ê·¸ë¦° ë§Œë“¤ì–´ì§€ëŠ” ê³¼ì • ë„£ê¸°

---
